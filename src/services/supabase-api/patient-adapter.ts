
import { Patient, Gender, MaritalStatus, Handedness, Contraception } from "@/types";

export const adaptPatientFromSupabase = (data: any): Patient => ({
  id: data.id,
  createdAt: data.created_at || data.createdAt,
  updatedAt: data.updated_at || data.updatedAt,
  firstName: data.firstName,
  lastName: data.lastName,
  email: data.email,
  phone: data.phone,
  address: data.address,
  gender: data.gender as Gender,
  birthDate: data.birthDate,
  maritalStatus: data.maritalStatus as MaritalStatus,
  occupation: data.occupation,
  hasChildren: data.hasChildren,
  childrenAges: data.childrenAges,
  generalPractitioner: data.generalPractitioner,
  surgicalHistory: data.surgicalHistory,
  traumaHistory: data.traumaHistory,
  rheumatologicalHistory: data.rheumatologicalHistory,
  currentTreatment: data.currentTreatment,
  handedness: data.handedness as Handedness,
  hasVisionCorrection: data.hasVisionCorrection,
  ophtalmologistName: data.ophtalmologistName,
  entProblems: data.entProblems,
  entDoctorName: data.entDoctorName,
  digestiveProblems: data.digestiveProblems,
  digestiveDoctorName: data.digestiveDoctorName,
  physicalActivity: data.physicalActivity,
  isSmoker: data.isSmoker,
  isExSmoker: data.isExSmoker || false,
  smokingSince: data.smokingSince || null,
  smokingAmount: data.smokingAmount || null,
  quitSmokingDate: data.quitSmokingDate || null,
  isDeceased: data.isDeceased,
  contraception: data.contraception as Contraception,
  hdlm: data.hdlm,
  avatarUrl: data.avatarUrl,
  cabinetId: data.cabinetId,
  userId: data.userId || null,
  osteopathId: data.osteopathId || 1,
  // Nouveaux champs pour tous les patients
  complementaryExams: data.complementaryExams || null,
  generalSymptoms: data.generalSymptoms || null,
  // Nouveaux champs pour les enfants
  pregnancyHistory: data.pregnancyHistory || null,
  birthDetails: data.birthDetails || null,
  developmentMilestones: data.developmentMilestones || null,
  sleepingPattern: data.sleepingPattern || null,
  feeding: data.feeding || null,
  behavior: data.behavior || null,
  childCareContext: data.childCareContext || null,
});
